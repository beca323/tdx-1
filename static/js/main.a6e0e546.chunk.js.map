{"version":3,"sources":["function/getTourismAPI.js","svg/ScrollToTop.js","WanWhere.js","index.js"],"names":["getTourismAPI","city","axios","headers","getAuthorizationHeader","then","response","sessionStorage","setItem","JSON","stringify","data","console","log","catch","error","GMTString","Date","toGMTString","ShaObj","jsSHA","setHMACKey","update","getHMAC","ScrollToTop","className","onClick","document","documentElement","scrollTop","viewBox","fill","xmlns","d","cx","cy","r","fillOpacity","WanWhere","useState","apiData","setApiData","selectCity","setSelectCity","findWhat","setFindWhat","keyword","setKeyword","currentURL","useEffect","getItem","parse","result","LogoPicture","beautifulPicture","cn","pictureName","pictureUrl","SearchSet","handleSearch","e","preventDefault","replace","filter","Name","includes","handleSelectCity","target","value","handleChangeFind","path","exact","element","CardsContainer","Attraction","style","background","backgroundSize","backgroundRepeat","src","alt","href","color","type","name","id","onChange","checked","htmlFor","onSubmit","placeholder","map","item","index","Picture","PictureUrl1","Level","Class1","Class2","Class3","DescriptionDetail","substring","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a6e0e546.chunk.js","sourcesContent":["import * as axios from 'axios'\nimport jsSHA from 'jssha'\n\n// const TOURISM_API_URL = 'https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot/Taipei?$top=30&$format=JSON'\nconst TOURISM_API_URL = 'https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot/'\n\nexport function getTourismAPI(city) {\n  return axios(TOURISM_API_URL + city, { headers: getAuthorizationHeader() })\n    .then((response) => {\n      sessionStorage.setItem('tourismData', JSON.stringify(response.data))\n      console.log(response.data[0])\n      return response.data\n    })\n    .catch((error) => {\n      return 'error: ' + error\n    })\n}\n\n\n\nfunction getAuthorizationHeader() {\n  //  填入自己 ID、KEY 開始\n  let AppID = 'FFFFFFFF-FFFF-FFFF-FFFF-FFFFFFFFFFFF'\n  let AppKey = 'FFFFFFFF-FFFF-FFFF-FFFF-FFFFFFFFFFFF'\n  //  填入自己 ID、KEY 結束\n  let GMTString = new Date().toGMTString()\n  let ShaObj = new jsSHA('SHA-1', 'TEXT')\n  ShaObj.setHMACKey(AppKey, 'TEXT')\n  ShaObj.update('x-date: ' + GMTString)\n  let HMAC = ShaObj.getHMAC('B64')\n  let Authorization = 'hmac username=\"' + AppID + '\", algorithm=\"hmac-sha1\", headers=\"x-date\", signature=\"' + HMAC + '\"'\n  return { 'Authorization': Authorization, 'X-Date': GMTString }\n}\n\n// 洧杰申請\n// let AppID = '4ad9f73726a0409a9376afd2b59e59a7';\n// let AppKey = 'iR-j7mJI1CY924a-xfd6vhXZciM';\n","import React from 'react'\n\nexport default function ScrollToTop() {\n\n  const handleScrollToTop = () => {\n    document.documentElement.scrollTop = 0\n  }\n  return (\n    <div className=\"ScrollToTop\" onClick={handleScrollToTop}>\n      <svg viewBox=\"0 0 72 100\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M30.31 83.5918H26.1967V95H24.518V83.5918H20.4135V82.2031H30.31V83.5918ZM31.5439 90.1572C31.5439 89.2256 31.7256 88.3877 32.0889 87.6436C32.458 86.8994 32.9678 86.3252 33.6182 85.9209C34.2744 85.5166 35.0215 85.3145 35.8594 85.3145C37.1543 85.3145 38.2002 85.7627 38.9971 86.6592C39.7998 87.5557 40.2012 88.748 40.2012 90.2363V90.3506C40.2012 91.2764 40.0225 92.1084 39.665 92.8467C39.3135 93.5791 38.8066 94.1504 38.1445 94.5605C37.4883 94.9707 36.7324 95.1758 35.877 95.1758C34.5879 95.1758 33.542 94.7275 32.7393 93.8311C31.9424 92.9346 31.5439 91.748 31.5439 90.2715V90.1572ZM33.1787 90.3506C33.1787 91.4053 33.4219 92.252 33.9082 92.8906C34.4004 93.5293 35.0566 93.8486 35.877 93.8486C36.7031 93.8486 37.3594 93.5264 37.8457 92.8818C38.332 92.2314 38.5752 91.3232 38.5752 90.1572C38.5752 89.1143 38.3262 88.2705 37.8281 87.626C37.3359 86.9756 36.6797 86.6504 35.8594 86.6504C35.0566 86.6504 34.4092 86.9697 33.917 87.6084C33.4248 88.2471 33.1787 89.1611 33.1787 90.3506ZM51.1734 90.3506C51.1734 91.7979 50.8424 92.9639 50.1803 93.8486C49.5182 94.7334 48.6217 95.1758 47.4908 95.1758C46.3365 95.1758 45.4283 94.8096 44.7662 94.0771V98.6562H43.1402V85.4902H44.6256L44.7047 86.5449C45.3668 85.7246 46.2867 85.3145 47.4645 85.3145C48.607 85.3145 49.5094 85.7451 50.1715 86.6064C50.8395 87.4678 51.1734 88.666 51.1734 90.2012V90.3506ZM49.5475 90.166C49.5475 89.0938 49.3189 88.2471 48.8619 87.626C48.4049 87.0049 47.7779 86.6943 46.9811 86.6943C45.9967 86.6943 45.2584 87.1309 44.7662 88.0039V92.5479C45.2525 93.415 45.9967 93.8486 46.9986 93.8486C47.7779 93.8486 48.3961 93.541 48.8531 92.9258C49.316 92.3047 49.5475 91.3848 49.5475 90.166Z\" fill=\"#648094\" />\n        <circle cx=\"36\" cy=\"36\" r=\"36\" fill=\"#385C76\" fillOpacity=\"0.75\" />\n        <path d=\"M37.0607 19.9393C36.4749 19.3536 35.5251 19.3536 34.9393 19.9393L25.3934 29.4853C24.8076 30.0711 24.8076 31.0208 25.3934 31.6066C25.9792 32.1924 26.9289 32.1924 27.5147 31.6066L36 23.1213L44.4853 31.6066C45.0711 32.1924 46.0208 32.1924 46.6066 31.6066C47.1924 31.0208 47.1924 30.0711 46.6066 29.4853L37.0607 19.9393ZM37.5 50L37.5 21L34.5 21L34.5 50L37.5 50Z\" fill=\"white\" />\n      </svg>\n    </div>\n  )\n}\n","import React, { useState, useEffect } from 'react'\nimport { getTourismAPI } from './function/getTourismAPI'\nimport ScrollToTop from './svg/ScrollToTop'\nimport { BrowserRouter as Router, Routes, Route, } from \"react-router-dom\"\n\nexport default function WanWhere() {\n  const [apiData, setApiData] = useState([])\n  const [selectCity, setSelectCity] = useState('Taipei')\n  const [findWhat, setFindWhat] = useState('view')\n  const [keyword, setKeyword] = useState('')\n  const currentURL = '/tdx-1'\n  const beautifulPicture = {\n    cn: '南投',\n    pictureName: 'NANTOU',\n    pictureUrl: 'https://i.imgur.com/GwUpUVl.jpg',\n  }\n  const handleSelectCity = (e) => {\n    // console.log(e.target.value)\n    setSelectCity(e.target.value)\n  }\n  const handleChangeFind = (e) => {\n    // console.log(e.target.value)\n    setFindWhat(e.target.value)\n  }\n  const handleSearch = (e) => {\n    e.preventDefault()\n    // console.log('searching...')\n    getTourismAPI(selectCity).then(result => {\n      // console.log(result)\n      if (keyword.replace(' ') !== '') {\n        result = result.filter(e => e.Name.includes(keyword))\n      }\n      setApiData(result)\n    })\n  }\n  useEffect(() => {\n    if (sessionStorage.getItem('tourismData')) {\n      console.log('from session: ')\n      // console.log(JSON.parse(sessionStorage.getItem('tourismData')))\n      setApiData(JSON.parse(sessionStorage.getItem('tourismData')))\n      return\n    }\n    getTourismAPI(selectCity).then(result => {\n      // console.log(result)\n      console.log('fetch api')\n      setApiData(result)\n    })\n  }, [])\n  return (\n    <div className=\"WanWhere\">\n      <ScrollToTop />\n      <LogoPicture beautifulPicture={beautifulPicture} />\n      <SearchSet\n        keyword={keyword}\n        setKeyword={setKeyword}\n        handleSearch={handleSearch} handleSelectCity={handleSelectCity} handleChangeFind={handleChangeFind} findWhat={findWhat} />\n      <Router>\n        <Routes>\n          <Route path={`${currentURL}`} exact element={<CardsContainer apiData={apiData} />} />\n          <Route path={`${currentURL}/attraction`} element={<Attraction />} />\n        </Routes>\n      </Router>\n    </div>\n  )\n}\n\n\nexport function LogoPicture({ beautifulPicture }) {\n  return (\n    <div className=\"logo-picture\"\n      style={{\n        background: 'url(' + beautifulPicture.pictureUrl + ')',\n        backgroundSize: 'cover',\n        backgroundRepeat: 'no-repeat'\n      }}>\n      <img src=\"./image/Logo.png\" alt=\"灣去哪兒？\" />\n      <h1>{beautifulPicture.pictureName}</h1>\n      <div className=\"subtitle\">\n        <a href=\"./\" style={{ color: 'white' }}>\n          {beautifulPicture.cn}去哪兒？>>\n        </a>\n      </div>\n    </div>\n  )\n}\n\nexport function SearchSet({ keyword, setKeyword, handleSearch, handleSelectCity, handleChangeFind, findWhat }) {\n  return (\n    <div className=\"search-set\">\n      <div>\n        <input type=\"radio\" name=\"find\" id=\"view\" value=\"view\" onChange={handleChangeFind} checked={findWhat === 'view'} />\n        <label htmlFor=\"view\"><span></span>找景點</label>\n          &emsp;&emsp;\n          <input type=\"radio\" name=\"find\" id=\"hotel\" value=\"hotel\" onChange={handleChangeFind} checked={findWhat === 'hotel'} />\n        <label htmlFor=\"hotel\"><span></span>找飯店</label>\n          &emsp;&emsp;\n          <input type=\"radio\" name=\"find\" id=\"food\" value=\"food\" onChange={handleChangeFind} checked={findWhat === 'food'} />\n        <label htmlFor=\"food\"><span></span>找美食</label>\n          &emsp;&emsp;\n          <input type=\"radio\" name=\"find\" id=\"activity\" value=\"activity\" onChange={handleChangeFind} checked={findWhat === 'activity'} />\n        <label htmlFor=\"activity\"><span></span>找活動</label>\n      </div>\n      <form>\n        <select className=\"selectCity\" name=\"City\" onChange={handleSelectCity} >\n          <option value=\"Taipei\"> 臺北市  </option>\n          <option value=\"NewTaipei\"> 新北市  </option>\n          <option value=\"Taoyuan\"> 桃園市  </option>\n          <option value=\"Taichung\"> 臺中市  </option>\n          <option value=\"Tainan\"> 臺南市  </option>\n          <option value=\"Kaohsiung\"> 高雄市  </option>\n          <option value=\"Keelung\"> 基隆市  </option>\n          <option value=\"Hsinchu\"> 新竹市  </option>\n          <option value=\"HsinchuCounty\"> 新竹縣  </option>\n          <option value=\"MiaoliCounty\"> 苗栗縣  </option>\n          <option value=\"ChanghuaCounty\"> 彰化縣  </option>\n          <option value=\"NantouCounty\"> 南投縣  </option>\n          <option value=\"YunlinCounty\"> 雲林縣  </option>\n          <option value=\"ChiayiCounty\"> 嘉義縣  </option>\n          <option value=\"Chiayi\"> 嘉義市  </option>\n          <option value=\"PingtungCounty\"> 屏東縣  </option>\n          <option value=\"YilanCounty\"> 宜蘭縣  </option>\n          <option value=\"HualienCounty\"> 花蓮縣  </option>\n          <option value=\"TaitungCounty\"> 臺東縣  </option>\n          <option value=\"KinmenCounty\"> 金門縣  </option>\n          <option value=\"PenghuCounty\"> 澎湖縣  </option>\n          <option value=\"LienchiangCounty\"> 連江縣  </option>\n        </select>\n        <input value={keyword}\n          onChange={e => setKeyword(e.target.value)}\n          onSubmit={handleSearch}\n          type=\"text\" placeholder=\"或用關鍵字搜尋想去哪玩？\" />\n        <button onClick={handleSearch} className=\"btn\"><i className=\"fas fa-search\"></i>搜 尋</button>\n      </form>\n    </div>\n  )\n}\n\nexport function CardsContainer({ apiData }) {\n  useEffect(() => {\n    console.log(apiData[0])\n  }, [apiData])\n  return (\n    <div className=\"tourism-card-container\">\n      {apiData.map((item, index) => {\n        return (\n          <div key={index} className=\"tourism-card\" >\n            <div className=\"img\">\n              <img src={item.Picture.PictureUrl1} alt={item.Name} />\n            </div>\n            <div className=\"text\">\n              <div className=\"title\">{item.Name}</div>\n              <div className=\"DescriptionDetail\">\n                <div className=\"tourism-tags\">\n                  {item.Level ? <span className=\"tourism-tag\"># {item.Level}</span> : ''}\n                  {item.Class1 ? <span className=\"tourism-tag \"># {item.Class1}</span> : <span className=\"tourism-tag \"># 未分類</span>}\n                  {item.Class2 ? <span className=\"tourism-tag \"># {item.Class2}</span> : ''}\n                  {item.Class3 ? <span className=\"tourism-tag \"># {item.Class3}</span> : ''}\n                </div>\n\n                {item.DescriptionDetail.substring(0, 76)}\n                  ... &emsp;\n                <a href=\"#\" style={{ color: '#E7A600' }}>\n                  more >>\n                </a>\n              </div>\n            </div>\n          </div>\n        )\n      })}\n    </div>\n  )\n}\n\nexport function Attraction() {\n  return (\n    <div>attraction</div>\n  )\n}","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport './style.scss'\nimport './rrStyle.scss'\nimport WanWhere from './WanWhere'\n\nReactDOM.render(\n  <React.StrictMode>\n    {/* <App /> */}\n    <WanWhere />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n"],"sourceRoot":""}